extends base

block prepend title
  | Archive |&nbsp;

block container
  article.container(id="archive")
    section.twelve.columns
      h3 Blog Archive
      - var archive = _.chain(contents.articles._.directories).map(function(item) {
      -   return item.index
      - }).compact().sortBy(function(item) {
      -   return -item.date
      - }).groupBy(function(item) {
      -   return item.date.getFullYear()
      - }).value()
      - var map = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']

      section.archive
        ul.archive
          each year in _.chain(archive).keys().reverse().value()
            li.year
              h4= year
            - var months = _.groupBy(archive[year], function(item) { return map[item.date.getMonth()] })
            ul
              //- each articles, month in months
              //-   li.article
              //-     - var m = month
              //-     each article in articles
              //-       span.article
              //-         strong
              //-           =m
              //-             &nbsp;//&nbsp;
              //-         a(href=article.url)
              //-           =article.title
